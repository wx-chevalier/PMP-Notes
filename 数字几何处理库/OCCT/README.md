# OCCT

![Cascade Technology](https://assets.ng-tech.icu/item/20230619220148.png)

CAD 技术从 60 年代诞生以来，经历了二维绘图、线框模型、自由曲面模型、实体造型、特征造型等重要发展阶段。随着 CAD 技术的发展也诞生了许多成熟和知名的 CAD 引擎和软件。目前，商用 CAD 引擎主要包括了 ACIS、HOOPS、ParaSolid 等。其中使用 ACIS 引擎的底层产品主要包括了 AutoCAD、Inventer、Catia、MicroSolid 等；使用 ParaSolid 引擎的主要包括了 UG、Solidworks、SolidEdge 等。但由于关注点的差别及商业保密的因素，不同的 CAD 软件都有自己的一套建模方式和存储体系，这导致了系统间数据无法进行直接的传递。目前采用的方式是通过中间标准格式文件为媒介进行传递，但是这种方式会丢失一些细节特征，这就还需要进行一些其它额外的修补工作，这也一定程度上影响了 CAD 技术的发展。

在商用 CAD 软件外，还有一些比较成熟的开源 CAD 引擎，其中使用的比较多的是 OpenCascade(简称 OCC)。OCC 平台是由法国 Matra Datavision 公司开发的 CAD/CAE/CAM 软件平台，可以说是世界上最重要的几何造型基础软件平台之一。它是一个开放源码 CAD 内核，可以定制和扩展（添加新的功能组件，类的进一步继承），面向 CAD/CAM，对主流 CAD 数据格式提供支持（STEP/STL/IGES 等，可自行开发转换程序提供特定数据格式的支持），提供高级建模函数（拟合，有理样条曲线，拉伸、旋转、扫出、层叠拉伸、圆角、倒角、薄壳、修剪、偏移等），参数化模型，提供几何模型的特征提取，对 Visual C++/MFC 有很好的支持。

- 1999 年，Matra Datavision 决定以开放级联技术公共许可证下的开源模型发布其 CAS.CADE 基础设施，并将其更名为开放级联。
- 2000 年，成立了一家独立的公司 Open Cascade SAS，以围绕 Open Cascade 开展业务。Open Cascade SAS 于 2003 年出售给法国服务提供商 Principia，然后在 2006 年被 Areva 的子公司 Euriware Group 收购。
- 2004 年，该软件更名为 Open Cascade Technology，以区别于该公司本身的名称。
- Open Cascade S.A.S.提供该库的认证版本，该版本偶尔发布，通常每年发布 1-2 个版本。在版本 6.5.0（2011）之前，只有次要版本和主要版本是公开的，而中间（维护）版本仅可供 Open Cascade S.A.S.的客户访问。例如，版本 6.3.0 于 2008 年公开发布，下一个公开版本 6.5.0 于 2011 年初发布。从 6.5.0 版开始的所有最新版本都是公开的。
- 2011 年 3 月，Thomas Paviot 启动了开放级联库的最新公开版本 6.5.0。该倡议被称为开放式级联社区版。该项目旨在为图书馆建立一个独立的基于社区的发布和 bug 报告流程。
- 2011 年 12 月，OpenCascade 为外部贡献者安装了一个 web 门户，并公开了其螳螂 Bug 跟踪器和更多 Git 存储库（只读 GitHub 镜像已于 2020 年建立）。根据新网站上的声明，鼓励开源社区的外部贡献者参与开放级联技术的开发，即直接在 bugtracker 中注册 bug，在签署贡献者许可协议后对代码做出贡献，等等。
- 自 2013 年 12 月 18 日起，LGPL-2.1 中仅提供了版本为 6.7.0 的开放式级联技术，其他例外情况除外。在此之前的版本是根据“开放级联技术公共许可证”授权的，该许可证与 GPL 不兼容，Fedora 项目认为该许可证是非免费的。

OCCT 的功能分为几个大模块。每个模块定义工具包（库）列表。主要模块：

- 基础类：定义基本类、内存分配器、OS 抽象层、集合（数据映射、数组等）、加速数据结构（BVH 树）和其他模块使用的向量/矩阵数学。
- 建模数据：提供数据结构来表示二维和三维几何图元（分析曲线：直线、圆、椭圆、双曲线、抛物线、Bézier、B 样条、偏移；分析曲面：平面、圆柱体、圆锥体、球体、圆环体、Bézier、B 样条、旋转、拉伸、偏移）及其组合到 B-Rep 模型中。
- 建模算法：包含大量几何和拓扑算法（交集、布尔运算、曲面网格划分、圆角、形状修复）。
- 可视化：提供在 3D Viewer 中显示几何图形的交互式服务；实现一个紧凑的 OpenGL/OpenGL ES 渲染器，支持传统的 Phong、实时 PBR 金属粗糙度着色模型以及交互式光线跟踪/路径跟踪引擎。
- 数据交换：提供导入/导出各种 CAD 格式的可能性。STEP、IGES、glTF、OBJ、STL 和 VRML 本机支持。可以使用插件导入其他格式。扩展数据交换（XDE）组件依赖于统一的 XCAF 文档定义，其中包括 CAD 形状的装配结构，颜色/名称/材质/元数据/图层属性以及其他补充信息，如 PMI。
- 应用程序框架：提供处理特定于应用程序的数据的解决方案。
- DRAW Test Harness：基于 Tcl 解释器实现 OCCT 算法的脚本接口，用于交互式使用、自动化流程、原型应用程序和测试目的。
- Workshop Organization Kit（WOK）是一个开放式级联开发环境，旨在允许大量开发人员使用通过本地网络共享的公共参考版本来开发产品。
- 在 OCCT 7.0.0 发布之前，如果不使用 WOK，就不可能对源代码进行实质性修改，因为它是唯一一个支持 CDL（CAS.CADE 定义语言）的工具，用于声明大多数 OCCT 类，还用于定义 OCCT 库的逻辑结构。WOK 已包含在以前的 OCCT 分发中；自 OCCT 版本 6.4 以来，它是一个独立的工具。在 7.0.0 版本中，所有 CDL 文件都已从 OCCT 源代码中删除，使得 OCCT 开发不再需要 WOK。
